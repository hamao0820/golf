(()=>{"use strict";var e={437:()=>{},724:()=>{},468:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(r(319));new class{constructor(){(new i.default).execute()}}},497:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(r(660));class s{static isAdjacent(e,t){switch(e.getLead().rank){case"A":return"2"===t.rank||"K"===t.rank;case"2":return"A"===t.rank||"3"===t.rank;case"3":return"2"===t.rank||"4"===t.rank;case"4":return"3"===t.rank||"5"===t.rank;case"5":return"4"===t.rank||"6"===t.rank;case"6":return"5"===t.rank||"7"===t.rank;case"7":return"6"===t.rank||"8"===t.rank;case"8":return"7"===t.rank||"9"===t.rank;case"9":return"8"===t.rank||"10"===t.rank;case"10":return"9"===t.rank||"J"===t.rank;case"J":return"10"===t.rank||"Q"===t.rank;case"Q":return"J"===t.rank||"K"===t.rank;case"K":return"Q"===t.rank||"A"===t.rank}}static isEnd(e,t){e.isRemain()||t.canDraw()}static isLose(e,t,r){return!e.canDraw()&&Array(i.default.ColumnNum).fill(0).map(((e,a)=>t.canTake(a)&&s.isAdjacent(r,t.getLastCard(a)))).every((e=>!e))}static isWin(e){return!e.isRemain()}static canTake(e,t,r){return e.canTake(r)&&s.isAdjacent(t,e.getLastCard(r))}}t.default=s},319:function(e,t,r){var a,i,s,n,o=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},d=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=c(r(477)),f=c(r(746)),h=c(r(660)),u=c(r(770)),w=c(r(709)),p=c(r(416)),m=c(r(497));a=new WeakMap,i=new WeakMap,s=new WeakMap,n=new WeakMap,t.default=class{constructor(){a.set(this,void 0),i.set(this,void 0),s.set(this,void 0),n.set(this,void 0),o(this,a,new f.default,"f");const e=Array.from({length:h.default.ColumnNum},(()=>new l.default(Array.from({length:l.default.CardsNum},(()=>d(this,a,"f").handOutCard())))));o(this,s,new h.default(e),"f"),o(this,i,new w.default(Array.from(d(this,a,"f").getCards())),"f"),o(this,n,new u.default(d(this,i,"f").drawCard()),"f")}start(){this.init(),new p.default(this)}init(){o(this,a,new f.default,"f");const e=Array.from({length:h.default.ColumnNum},(()=>new l.default(Array.from({length:l.default.CardsNum},(()=>d(this,a,"f").handOutCard())))));o(this,s,new h.default(e),"f"),o(this,i,new w.default(Array.from(d(this,a,"f").getCards())),"f"),o(this,n,new u.default(d(this,i,"f").drawCard()),"f")}execute(){this.start()}getLayoutSize(){return d(this,s,"f").size}getLayoutColumns(){return d(this,s,"f").getColumns()}getStockTopCard(){return d(this,i,"f").getTopCard()}getStockSize(){return d(this,i,"f").size}getLead(){return d(this,n,"f").getLead()}drawCardFromStock(){d(this,n,"f").addLeads(d(this,i,"f").drawCard())}canTake(e){return m.default.canTake(d(this,s,"f"),d(this,n,"f"),e)}takeCardFromLayout(e){d(this,n,"f").addLeads(d(this,s,"f").takeCard(e))}isEnd(){return m.default.isEnd(d(this,s,"f"),d(this,i,"f"))}isWin(){return m.default.isWin(d(this,s,"f"))}isLose(){return m.default.isLose(d(this,i,"f"),d(this,s,"f"),d(this,n,"f"))}}},43:function(e,t){var r,a,i,s=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},n=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(e,t,n=!1){r.set(this,void 0),a.set(this,void 0),i.set(this,void 0),s(this,i,n,"f"),s(this,r,e,"f"),s(this,a,t,"f")}get rank(){return n(this,r,"f")}get suit(){return n(this,a,"f")}get isFaceUp(){return n(this,i,"f")}faceUp(){s(this,i,!0,"f")}}r=new WeakMap,a=new WeakMap,i=new WeakMap,o.rankMap={1:"A",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"J",12:"Q",13:"K"},o.cardRankNum=13,o.cardRankArr=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],o.cardSuitArr=["Clubs","Spades","Hearts","Diamonds"],t.default=o},477:function(e,t){var r,a=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(e){r.set(this,void 0),a(this,r,e,"f")}get cards(){return i(this,r,"f")}takeCard(){if(!this.canTake)throw Error;const e=i(this,r,"f").pop();if(!e)throw Error;return e}get size(){return i(this,r,"f").length}canTake(){return i(this,r,"f").length>=1}getLastCard(){if(!this.canTake)throw Error;return this.cards[i(this,r,"f").length-1]}}r=new WeakMap,s.CardsNum=5,t.default=s},746:function(e,t,r){var a,i=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(43));a=new WeakMap,t.default=class{constructor(){a.set(this,void 0);const e=[];for(let t=1;t<=o.default.cardRankNum;t++)e.push(new o.default(o.default.rankMap[t],"Clubs")),e.push(new o.default(o.default.rankMap[t],"Spades")),e.push(new o.default(o.default.rankMap[t],"Hearts")),e.push(new o.default(o.default.rankMap[t],"Diamonds"));i(this,a,this.shuffle(e),"f")}handOutCard(){const e=s(this,a,"f").pop();if(!e)throw Error;return e}getCards(){return s(this,a,"f")}shuffle(e){const t=[...e];for(let r=e.length-1;0<r;r--){const e=Math.floor(Math.random()*(r+1)),a=t[r];t[r]=t[e],t[e]=a}return t}}},660:function(e,t){var r,a=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(e){r.set(this,void 0),a(this,r,e,"f")}get size(){return i(this,r,"f").map((e=>e.size)).reduce(((e,t)=>e+t),0)}canTake(e){return!(e<0||s.ColumnNum<=e)&&i(this,r,"f")[e].canTake()}takeCard(e){return i(this,r,"f")[e].takeCard()}getColumns(){return i(this,r,"f")}getLastCard(e){return i(this,r,"f")[e].getLastCard()}isRemain(){return this.size>=1}}r=new WeakMap,s.ColumnNum=7,t.default=s},770:function(e,t){var r,a=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),r=new WeakMap,t.default=class{constructor(e){r.set(this,void 0),a(this,r,[e],"f")}addLeads(e){i(this,r,"f").push(e)}getLead(){return i(this,r,"f")[i(this,r,"f").length-1]}}},709:function(e,t){var r,a=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),r=new WeakMap,t.default=class{constructor(e){r.set(this,void 0),a(this,r,e,"f")}canDraw(){return this.size>=1}drawCard(){if(!this.canDraw())throw Error;const e=i(this,r,"f").pop();if(!e)throw Error;return e}get size(){return i(this,r,"f").length}getCards(){return i(this,r,"f")}getTopCard(){return i(this,r,"f")[this.size-1]}}},685:function(e,t,r){var a,i,s=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(i,s){function n(e){try{d(a.next(e))}catch(e){s(e)}}function o(e){try{d(a.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(n,o)}d((a=a.apply(e,t||[])).next())}))},n=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=d(r(206));a=new WeakMap,i=new WeakMap,t.default=class{constructor(e,t){a.set(this,void 0),i.set(this,void 0),n(this,a,e,"f"),n(this,i,t,"f")}handleClickStock(e){return s(this,void 0,void 0,(function*(){c.default.playFlipSoundEffect(),yield o(this,a,"f").flipStock(e),yield o(this,a,"f").slideCardFromStockToLead(),o(this,i,"f").drawCardFromStock(),o(this,a,"f").update()}))}handleClickLayout(e){return s(this,void 0,void 0,(function*(){o(this,i,"f").canTake(e)&&(c.default.playSelectSoundEffect(),yield o(this,a,"f").slideCardFromLayoutToLead(e),o(this,i,"f").takeCardFromLayout(e),o(this,a,"f").update())}))}handleClickRetryButton(){c.default.playSceneChangeSoundEffect(),o(this,a,"f").clear(),o(this,i,"f").retry()}}},677:function(e,t){var r,a=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),r=new WeakMap,t.default=class{constructor(e){r.set(this,void 0),a(this,r,e,"f")}getLayoutSize(){return i(this,r,"f").getLayoutSize()}getLayout(){return i(this,r,"f").getLayoutColumns()}getStockTopCard(){return i(this,r,"f").getStockTopCard()}getStockSize(){return i(this,r,"f").getStockSize()}getLead(){return i(this,r,"f").getLead()}drawCardFromStock(){i(this,r,"f").drawCardFromStock()}takeCardFromLayout(e){i(this,r,"f").takeCardFromLayout(e)}canTake(e){return i(this,r,"f").canTake(e)}isEnd(){return i(this,r,"f").isEnd()}isWin(){return i(this,r,"f").isWin()}isLose(){return i(this,r,"f").isLose()}retry(){i(this,r,"f").start()}}},853:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.model=e,this.controller=t}}},206:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static playFlipSoundEffect(){new Audio("./static/カードをめくる.mp3").play()}static playSelectSoundEffect(){const e=new Audio("./static/決定3.mp3");e.volume=.1,e.play()}static playSceneChangeSoundEffect(){const e=new Audio("./static/シーン切り替え1.mp3");e.volume=.1,e.play()}static playSuccessSoundEffect(){const e=new Audio("./static/歓声と拍手.mp3");e.volume=.1,e.play()}static playFailsSoundEffect(){const e=new Audio("./static/間抜け7.mp3");e.volume=.1,e.play()}}},905:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static createCardFrame(){const e=document.createElement("div");return e.classList.add("card"),e}static createFaceUpCard(e){const t=this.createCardFrame();t.classList.add("face-up");const r="Clubs"===e.suit?"&clubs;":"Diamonds"===e.suit?"&diams;":"Hearts"===e.suit?"&hearts;":"&spades;",a="Hearts"===e.suit||"Diamonds"===e.suit?"red":"";return t.innerHTML=`<p class="card-rank"> ${e.rank} </p><p style="color:${a}"> ${r} </p>`,t}}},345:function(e,t,r){var a,i=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(853));class d extends o.default{constructor(e,t){super(e,t),a.set(this,void 0),i(this,a,document.createElement("dialog"),"f")}display(e){let t="";this.model.isWin()&&(t="おめでとうございます！!成功です"),this.model.isLose()&&(t="残念！！もう一度挑戦してみましょう");const r=document.createElement("div");r.classList.add("dialog-container"),r.style.width="100%",r.style.height="100%",r.innerHTML=`<div class="dialog-message">${t}</div>`;const i=document.createElement("div");i.setAttribute("class","dialog-buttons");const n=document.createElement("button");n.innerText="閉じる",n.addEventListener("click",(()=>this.close()));const o=document.createElement("button");o.innerText="もう一度遊ぶ",o.addEventListener("click",(()=>this.controller.handleClickRetryButton()),{once:!0}),o.addEventListener("click",(()=>this.close())),i.style.display="flex",i.appendChild(n),i.appendChild(o),r.appendChild(i),s(this,a,"f").appendChild(r),e.appendChild(s(this,a,"f"))}clear(){i(this,a,document.createElement("dialog"),"f")}open(){s(this,a,"f").showModal()}close(){s(this,a,"f").close()}}a=new WeakMap,t.default=d},802:function(e,t,r){var a,i=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(853)),d=n(r(905));class c extends o.default{constructor(e,t){super(e,t),a.set(this,void 0),i(this,a,document.createElement("div"),"f"),s(this,a,"f").classList.add("layout")}display(e){this.model.getLayout().forEach(((e,t)=>{const r=document.createElement("div");r.classList.add("column"),e.cards.forEach(((a,i)=>{const s=d.default.createFaceUpCard(a);s.style.zIndex=String(i),i===e.size-1&&s.addEventListener("click",(()=>this.controller.handleClickLayout(t))),this.model.canTake(t)&&i===e.size-1&&s.classList.add("shine"),r.appendChild(s)})),s(this,a,"f").appendChild(r)})),e.appendChild(s(this,a,"f"))}clear(){i(this,a,document.createElement("div"),"f"),s(this,a,"f").classList.add("layout")}slideCard(e,t){const r=s(this,a,"f").children[e].children[s(this,a,"f").children[e].children.length-1],i=[r.getBoundingClientRect().left,r.getBoundingClientRect().top];r.style.transform=`translate(${t[0]-i[0]}px, ${t[1]-i[1]}px)`,r.style.transition=`transform ${c.slideDelay}s ease`}}a=new WeakMap,c.slideDelay=.3,t.default=c},574:function(e,t,r){var a,i,s=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},n=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=o(r(853)),c=o(r(905));class l extends d.default{constructor(e,t){super(e,t),a.set(this,void 0),i.set(this,void 0),s(this,a,document.createElement("div"),"f"),n(this,a,"f").classList.add("lead"),s(this,i,document.createElement("div"),"f")}display(e){n(this,i,"f").classList.add("lead-pile");const t=this.model.getLead(),r=c.default.createFaceUpCard(t);n(this,i,"f").appendChild(r),n(this,a,"f").appendChild(n(this,i,"f")),e.appendChild(n(this,a,"f"))}clear(){s(this,a,document.createElement("div"),"f"),n(this,a,"f").classList.add("lead"),s(this,i,document.createElement("div"),"f")}getPosition(){return[n(this,i,"f").getBoundingClientRect().left,n(this,i,"f").getBoundingClientRect().top]}}a=new WeakMap,i=new WeakMap,t.default=l},834:function(e,t,r){var a,i,s=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},n=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=o(r(853)),c=o(r(905));class l extends d.default{constructor(e,t){super(e,t),a.set(this,void 0),i.set(this,void 0),s(this,a,document.createElement("div"),"f"),n(this,a,"f").classList.add("stock"),s(this,i,document.createElement("div"),"f")}display(e){n(this,i,"f").classList.add("stock-pile");for(let e=0;e<this.model.getStockSize();e++){const t=c.default.createCardFrame();t.style.zIndex=String(e),t.style.bottom=1*e+"px",t.style.left=.3*e+"px",t.innerHTML=`<p class="remain">残り${e+1}枚</p>`,e===this.model.getStockSize()-1&&t.addEventListener("click",(e=>this.controller.handleClickStock(e)),{once:!0}),n(this,i,"f").appendChild(t)}n(this,a,"f").appendChild(n(this,i,"f")),e.appendChild(n(this,a,"f"))}clear(){s(this,a,document.createElement("div"),"f"),n(this,a,"f").classList.add("stock"),s(this,i,document.createElement("div"),"f")}flipCard(e){const t=e.currentTarget,r=c.default.createFaceUpCard(this.model.getStockTopCard()),a=this.model.getStockSize()-1;r.style.transform="rotateY(180deg)",n(this,i,"f").appendChild(r),r.style.transition=`transform ${l.flipDelay}s`,t.style.transition=`transform ${l.flipDelay}s`,r.style.zIndex=`${a}`,r.style.bottom=1*a+"px",r.style.left=.3*a+"px",setTimeout((()=>{r.style.transform="rotateY(0)"}),0),t.style.transform="rotateY(-180deg)"}slideCard(e){const t=n(this,i,"f").children[n(this,i,"f").children.length-1],r=[t.getBoundingClientRect().left,t.getBoundingClientRect().top];t.style.transform=`translate(${e[0]-r[0]}px, ${e[1]-r[1]}px)`,t.style.transition=`transform ${l.slideDelay}s ease`}}a=new WeakMap,i=new WeakMap,l.flipDelay=.5,l.slideDelay=.2,t.default=l},416:function(e,t,r){var a,i,s,n,o,d,c,l=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(i,s){function n(e){try{d(a.next(e))}catch(e){s(e)}}function o(e){try{d(a.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(n,o)}d((a=a.apply(e,t||[])).next())}))},f=this&&this.__classPrivateFieldSet||function(e,t,r,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,r):i?i.value=r:t.set(e,r),r},h=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const w=u(r(685)),p=u(r(677)),m=u(r(206)),v=u(r(345)),y=u(r(802)),_=u(r(574)),C=u(r(834));a=new WeakMap,i=new WeakMap,s=new WeakMap,n=new WeakMap,o=new WeakMap,d=new WeakMap,c=new WeakMap,t.default=class{constructor(e){a.set(this,void 0),i.set(this,void 0),s.set(this,void 0),n.set(this,void 0),o.set(this,void 0),d.set(this,void 0),c.set(this,void 0),f(this,i,new p.default(e),"f"),f(this,a,new w.default(this,h(this,i,"f")),"f"),f(this,s,document.createElement("div"),"f"),f(this,n,new y.default(h(this,i,"f"),h(this,a,"f")),"f"),f(this,o,new C.default(h(this,i,"f"),h(this,a,"f")),"f"),f(this,d,new _.default(h(this,i,"f"),h(this,a,"f")),"f"),f(this,c,new v.default(h(this,i,"f"),h(this,a,"f")),"f"),this.display()}display(){const e=document.createElement("div");e.classList.add("play-area"),h(this,n,"f").display(h(this,s,"f")),h(this,o,"f").display(e),h(this,d,"f").display(e),h(this,s,"f").appendChild(e),document.body.appendChild(h(this,s,"f")),h(this,c,"f").display(document.body),(h(this,i,"f").isWin()||h(this,i,"f").isLose())&&h(this,c,"f").open(),h(this,i,"f").isWin()&&m.default.playSuccessSoundEffect(),h(this,i,"f").isLose()&&m.default.playFailsSoundEffect()}clear(){document.body.innerHTML="",f(this,s,document.createElement("div"),"f"),h(this,n,"f").clear(),h(this,d,"f").clear(),h(this,o,"f").clear(),h(this,c,"f").clear()}update(){this.clear(),this.display()}flipStock(e){return l(this,void 0,void 0,(function*(){return h(this,o,"f").flipCard(e),new Promise((e=>{setTimeout(e,1e3*C.default.flipDelay)}))}))}slideCardFromStockToLead(){const e=h(this,d,"f").getPosition();return h(this,o,"f").slideCard(e),new Promise((e=>{setTimeout(e,1e3*C.default.slideDelay)}))}slideCardFromLayoutToLead(e){const t=h(this,d,"f").getPosition();return h(this,n,"f").slideCard(e,t),new Promise((e=>{setTimeout(e,1e3*y.default.slideDelay)}))}}}},t={};function r(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,r),s.exports}r(468),r(437),r(724)})();